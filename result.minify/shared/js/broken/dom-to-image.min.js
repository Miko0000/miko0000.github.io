/*! dom-to-image 10-06-2017 */!function(e){"use strict";function c(e,n){function s(e){return n.bgcolor&&(e.style.backgroundColor=n.bgcolor),n.width&&(e.style.width=n.width+"px"),n.height&&(e.style.height=n.height+"px"),n.style&&Object.keys(n.style).forEach(function(t){e.style[t]=n.style[t]}),e}return n=n||{},d(n),Promise.resolve(e).then(function(e){return l(e,n.filter,!0)}).then(v).then(g).then(s).then(function(s){return u(s,n.width||t.width(e),n.height||t.height(e))})}function _(e,n){return s(e,n||{}).then(function(n){return n.getContext("2d").getImageData(0,0,t.width(e),t.height(e)).data})}function y(e,t){return s(e,t||{}).then(function(e){return e.toDataURL()})}function j(e,t){return t=t||{},s(e,t).then(function(e){return e.toDataURL("image/jpeg",t.quality||1)})}function b(e,n){return s(e,n||{}).then(t.canvasToBlob)}function d(e){"undefined"==typeof e.imagePlaceholder?n.impl.options.imagePlaceholder=i.imagePlaceholder:n.impl.options.imagePlaceholder=e.imagePlaceholder,"undefined"==typeof e.cacheBust?n.impl.options.cacheBust=i.cacheBust:n.impl.options.cacheBust=e.cacheBust}function s(e,n){function s(e){var o,s=document.createElement("canvas");return(s.width=n.width||t.width(e),s.height=n.height||t.height(e),n.bgcolor)&&(o=s.getContext("2d"),o.fillStyle=n.bgcolor,o.fillRect(0,0,s.width,s.height)),s}return c(e,n).then(t.makeImage).then(t.delay(100)).then(function(t){var n=s(e);return n.getContext("2d").drawImage(t,0,0),n})}function l(e,n,s){function o(e){return e instanceof HTMLCanvasElement?t.makeImage(e.toDataURL()):e.cloneNode(!1)}function i(e,n,s){function i(e,t,n){var s=Promise.resolve();return t.forEach(function(t){s=s.then(function(){return l(t,n)}).then(function(t){t&&e.appendChild(t)})}),s}var o=e.childNodes;return 0===o.length?Promise.resolve(n):i(n,t.asArray(o),s).then(function(){return n})}function a(e,n){function s(){function s(e,n){function s(e,n){t.asArray(e).forEach(function(t){n.setProperty(t,e.getPropertyValue(t),e.getPropertyPriority(t))})}e.cssText?n.cssText=e.cssText:s(e,n)}s(window.getComputedStyle(e),n.style)}function o(){function s(s){function c(e,n,s){function o(e){var t=e.getPropertyValue("content");return e.cssText+" content: "+t+";"}function i(e){function n(t){return t+": "+e.getPropertyValue(t)+(e.getPropertyPriority(t)?" !important":"")}return t.asArray(e).map(n).join("; ")+";"}var a="."+e+":"+n,r=s.cssText?o(s):i(s);return document.createTextNode(a+"{"+r+"}")}var o,i,a=window.getComputedStyle(e,s),r=a.getPropertyValue("content");""!==r&&"none"!==r&&(o=t.uid(),n.className=n.className+" "+o,i=document.createElement("style"),i.appendChild(c(o,s,a)),n.appendChild(i))}[":before",":after"].forEach(function(e){s(e)})}function i(){e instanceof HTMLTextAreaElement&&(n.innerHTML=e.value),e instanceof HTMLInputElement&&n.setAttribute("value",e.value)}function a(){n instanceof SVGElement&&(n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n instanceof SVGRectElement&&["width","height"].forEach(function(e){var t=n.getAttribute(e);t&&n.style.setProperty(e,t)}))}return n instanceof Element?Promise.resolve().then(s).then(o).then(i).then(a).then(function(){return n}):n}return s||!n||n(e)?Promise.resolve(e).then(o).then(function(t){return i(e,t,n)}).then(function(t){return a(e,t)}):Promise.resolve()}function v(e){return r.resolveAll().then(function(t){var n=document.createElement("style");return e.appendChild(n),n.appendChild(document.createTextNode(t)),e})}function g(e){return a.inlineAll(e).then(function(){return e})}function u(e,n,s){return Promise.resolve(e).then(function(e){return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(e)}).then(t.escapeXhtml).then(function(e){return'<foreignObject x="0" y="0" width="100%" height="100%">'+e+"</foreignObject>"}).then(function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+n+'" height="'+s+'">'+e+"</svg>"}).then(function(e){return"data:image/svg+xml;charset=utf-8,"+e})}function h(){function l(){var e="application/font-woff",t="image/jpeg";return{woff:e,woff2:e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:t,jpeg:t,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function t(e){var t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function b(e){var n=t(e).toLowerCase();return l()[n]||""}function d(e){return e.search(/^(data:)/)!==-1}function i(e){return new Promise(function(t){for(var s=window.atob(e.toDataURL().split(",")[1]),o=s.length,i=new Uint8Array(o),n=0;n<o;n++)i[n]=s.charCodeAt(n);t(new Blob([i],{type:"image/png"}))})}function a(e){return e.toBlob?new Promise(function(t){e.toBlob(t)}):i(e)}function r(e,t){var s,n=document.implementation.createHTMLDocument(),o=n.createElement("base");return n.head.appendChild(o),s=n.createElement("a"),n.body.appendChild(s),o.href=t,s.href=e,s.href}function c(){var e=0;return function(){function t(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}return"u"+t()+e++}}function s(e){return new Promise(function(t,n){var s=new Image;s.onload=function(){t(s)},s.onerror=n,s.src=e})}function o(e){var t=3e4;return n.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime()),new Promise(function(s){function c(){if(4===o.readyState){if(200!==o.status)return void(i?s(i):r("cannot fetch resource: "+e+", status: "+o.status));var t=new FileReader;t.onloadend=function(){var e=t.result.split(/,/)[1];s(e)},t.readAsDataURL(o.response)}}function l(){i?s(i):r("timeout of "+t+"ms occured while fetching resource: "+e)}function r(e){console.error(e),s("")}var i,a,o=new XMLHttpRequest;o.onreadystatechange=c,o.ontimeout=l,o.responseType="blob",o.timeout=t,o.open("GET",e,!0),o.send(),n.impl.options.imagePlaceholder&&(a=n.impl.options.imagePlaceholder.split(/,/),a&&a[1]&&(i=a[1]))})}function u(e,t){return"data:"+t+";base64,"+e}function h(e){return e.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}function m(e){return function(t){return new Promise(function(n){setTimeout(function(){n(t)},e)})}}function f(e){for(var n=[],s=e.length,t=0;t<s;t++)n.push(e[t]);return n}function p(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")}function g(t){var n=e(t,"border-left-width"),s=e(t,"border-right-width");return t.scrollWidth+n+s}function v(t){var n=e(t,"border-top-width"),s=e(t,"border-bottom-width");return t.scrollHeight+n+s}function e(e,t){var n=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(n.replace("px",""))}return{escape:h,parseExtension:t,mimeType:b,dataAsUrl:u,isDataUrl:d,canvasToBlob:a,resolveUrl:r,getAndEncode:o,uid:c(),delay:m,asArray:f,escapeXhtml:p,makeImage:s,width:g,height:v}}function m(){function e(e){return e.search(o)!==-1}function n(e){for(var n,s=[];null!==(n=o.exec(e));)s.push(n[1]);return s.filter(function(e){return!t.isDataUrl(e)})}function s(e,n,s,o){function i(e){return new RegExp(`(url\\(['"]?)(`+t.escape(e)+`)(['"]?\\))`,"g")}return Promise.resolve(n).then(function(e){return s?t.resolveUrl(e,s):e}).then(o||t.getAndEncode).then(function(e){return t.dataAsUrl(e,t.mimeType(n))}).then(function(t){return e.replace(i(n),"$1"+t+"$3")})}function i(t,o,i){function a(){return!e(t)}return a()?Promise.resolve(t):Promise.resolve(t).then(n).then(function(e){var n=Promise.resolve(t);return e.forEach(function(e){n=n.then(function(t){return s(t,e,o,i)})}),n})}var o=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:i,shouldProcess:e,impl:{readUrls:n,inline:s}}}function f(){function n(){return e(document).then(function(e){return Promise.all(e.map(function(e){return e.resolve()}))}).then(function(e){return e.join(`
`)})}function e(){function e(e){return e.filter(function(e){return e.type===CSSRule.FONT_FACE_RULE}).filter(function(e){return o.shouldProcess(e.style.getPropertyValue("src"))})}function n(e){var n=[];return e.forEach(function(e){try{t.asArray(e.cssRules||[]).forEach(n.push.bind(n))}catch(t){console.log("Error while reading CSS rules from "+e.href,t.toString())}}),n}function s(e){return{resolve:function(){var t=(e.parentStyleSheet||{}).href;return o.inlineAll(e.cssText,t)},src:function(){return e.style.getPropertyValue("src")}}}return Promise.resolve(t.asArray(document.styleSheets)).then(n).then(e).then(function(e){return e.map(s)})}return{resolveAll:n,impl:{readAll:e}}}function p(){function e(e){function n(n){return t.isDataUrl(e.src)?Promise.resolve():Promise.resolve(e.src).then(n||t.getAndEncode).then(function(n){return t.dataAsUrl(n,t.mimeType(e.src))}).then(function(t){return new Promise(function(n,s){e.onload=n,e.onerror=s,e.src=t})})}return{inline:n}}function n(s){function i(e){var t=e.style.getPropertyValue("background");return t?o.inlineAll(t).then(function(t){e.style.setProperty("background",t,e.style.getPropertyPriority("background"))}).then(function(){return e}):Promise.resolve(e)}return s instanceof Element?i(s).then(function(){return s instanceof HTMLImageElement?e(s).inline():Promise.all(t.asArray(s.childNodes).map(function(e){return n(e)}))}):Promise.resolve(s)}return{inlineAll:n,impl:{newImage:e}}}var t=h(),o=m(),r=f(),a=p(),i={imagePlaceholder:void 0,cacheBust:!1},n={toSvg:c,toPng:y,toJpeg:j,toBlob:b,toPixelData:_,impl:{fontFaces:r,images:a,util:t,inliner:o,options:{}}};"undefined"!=typeof module?module.exports=n:e.domtoimage=n}(this)
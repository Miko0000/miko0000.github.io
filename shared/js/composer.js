async function composerCommand(e,t){const[s,...o]=e.trim().split(/ +|\t+|\n+/),n=(this.commands||composerCommands)[s];if(n)return await n.apply(this.commands||composerCommands,[t,...o])}async function composer(e,t,n){t=t||Object.assign([document.createElement("span")],{f:[],reset(){this.unshift(document.createElement("span"))}}),t.data=n;let s=0,i="",o=0;for(;s<e.length;){for(;s<e.length&&e[s]!="{";){const n=t[0].cloneNode(1);n.textContent=e[s++],t.unshift(n)}if(s>=e.length)break;for(s++,o++;s<e.length&&o>0;){if(e[s]=="{"&&(o++,s++),e[s]=="}"&&(o--,s++),o<=0)break;i+=e[s++]}await(this.commander||composerCommand).apply(this,[i,t]),i=""}return t.reverse()}function composerHighlight(e){let t=0;const n=[document.createElement("span")];for(;t<e.length;){if(e[t]=="{"){const o=document.createElement("span");o.innerText="{",o.classList.add("composer","composer-tag"),n.unshift(o);const s=document.createElement("span");for(s.innerText="",s.classList.add("composer","composer-command"),n.unshift(s),t++;e[t]&&e[t]==" ";)o.innerText+=e[t++];for(;e[t]&&e[t]!=" ";)s.innerText+=e[t++];for(;e[t]&&e[t]==" ";)s.innerText+=e[t++];const i=document.createElement("span");i.innerText="",i.classList.add("composer","composer-param"),n.unshift(i)}if(e[t]=="}"){const e=document.createElement("span");e.innerText="}",e.classList.add("composer","composer-tag"),n.unshift(e),n.unshift(document.createElement("span")),t++}if(t>=e.length)break;if(e[t]===`
`){n.unshift(document.createElement("br"));let e=n[1].cloneNode();e.innerText="",n.unshift(e)}else n[0].innerText+=e[t];t++}return console.log(e),n.reverse()}class Composer{constructor(){}}Composer.prototype.compose=composer,Composer.prototype.commander=composerCommand